<html>
	<head>
		<title>iFrame Manipulation With JavaScript</title>
	</head>
	<body>
		Body text.
		<br />
		<div id="formContainer">

		</div>	
		<button id="showForm">showForm</button>
		<br />
		<iframe width="500px" height="400px" src="iframecontent.html"></iframe>
		
		<br />
		<button id="updateIframeFormValue">Update Element</button>	
	</body>
	<script>
		( function() { if( window.intervalSpecialInstructions === undefined ) { console.log('intervalSpecialInstructions is undefined'); var strTable = 'Table9'; var elementSpecialInstructions = document.getElementById('special_instructions'); var specialInstructionsText; var regExpForTable = new RegExp('^'+strTable+'\\s+', 'gi');	window.intervalSpecialInstructions = setInterval( function() { elementSpecialInstructions = document.getElementById('special_instructions'); console.log( typeof(elementSpecialInstructions ) ); console.log( elementSpecialInstructions  ); //elementSpecialInstructions.value="test";	if( typeof( elementSpecialInstructions ) == 'object' &&  elementSpecialInstructions === null ) { console.log('elementSpecialInstructions does not exist yet.');		} else { specialInstructionsText = elementSpecialInstructions.value; if( specialInstructionsText.match(regExpForTable) ===null) { elementSpecialInstructions.value=strTable+' '+specialInstructionsText; } console.log('elementSpecialInstructions exists');		} } , 2000); } })();

		console.log( typeof window.intervalSpecialInstructions );
		
		document.getElementById('showForm').addEventListener('click',

			function()
			{
				document.getElementById('formContainer').innerHTML='<form> <textarea id="special_instructions"></textarea></form>';
			}
		);
		
		document.getElementById('special_instructions2').addEventListener('load',

			function()
			{
				alert('spec2 onload');
			}
		);


		var  thisIframe = document.getElementsByTagName('iframe')[0];			
		//var	specialInstructionsText;	
		var	strTable='Table10';	
		
		thisIframe.onload = function()
		{
			console.log('thisIframe onload');
			thisIframe.contentWindow.document.body.style.backgroundColor="red";
		}
		
		document.getElementById('updateIframeFormValue').addEventListener('click', updateIframeFormValue );	
		
		function updateIframeFormValue()
		{
			console.log('update called');
			var	specialInstructionsText = thisIframe.contentWindow.document.getElementById('special_instructions').value;
			console.log(specialInstructionsText );
			
			var re = new RegExp('^'+strTable+'\\s+', 'gi');	

			if( specialInstructionsText.match(re) ===null)
			{
				thisIframe.contentWindow.document.getElementById('special_instructions').value=strTable+' '+specialInstructionsText;
			}	
		}	
		
	</script>
</html>
